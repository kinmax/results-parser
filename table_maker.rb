require 'json'
require 'byebug'

file_path = File.join(File.dirname(__FILE__), 'results.json')
file = File.open(file_path, 'r')
raw = file.read
results = JSON.parse(raw)
output_path = "/home/kingusmao/grupo/results-parser/table.txt"

table = "\\begin{table}[h]
\\centering
\\resizebox{\\textwidth}{!}{%
    \\begin{tabular}{|c|c|c|c|c|c|c|c|c|}
      \\hline
      \\multicolumn{5}{|c|}{}&\\multicolumn{2}{|c|}{\\textit{h_{gc}}}&\\multicolumn{2}{|c|}{\\textit{h_{uniq}}}\\\\
      \\hline
      \\textbf{Domain}&$|\\mathcal{G}|$&$|\\mathcal{L}|$&\\textbf{\\% Obs}&$|\\mathcal{O}|$&\\makecell{\\textbf{Time (s)}\\\\$\\theta$   \\textbf{(0 / 10 / 20 / 30)}}&\\makecell{\\textbf{Accuracy (\\%)}\\\\$\\theta$   \\textbf{(0 / 10 / 20 / 30)}}&\\makecell{\\textbf{Time (s)}\\\\$\\theta$   \\textbf{(0 / 10 / 20 /30)}}&\\makecell{\\textbf{Accuracy (\\%)}\\\\$\\theta$   \\textbf{(0 / 10 / 20 / 30)}}\\\\
      \\hline
      "

results.each do |key, value|
    domain = key.gsub("_", "-").upcase
    table += "\\makecell{#{domain}\\\\#{value["problems"]}} & #{'%.1f' % value["goals_avg"]} & #{'%.1f' % value["landmarks_avg"]} & \\makecell{10 \\\\ 30 \\\\ 50 \\\\ 70 \\\\ 100} & \\makecell{#{'%.1f' % value["observations"]["10"]["observations_avg"]} \\\\ #{'%.1f' % value["observations"]["30"]["observations_avg"]} \\\\ #{'%.1f' % value["observations"]["50"]["observations_avg"]} \\\\ #{'%.1f' % value["observations"]["70"]["observations_avg"]} \\\\ #{'%.1f' % value["observations"]["100"]["observations_avg"]}} & \\makecell{#{'%.3f' % value["observations"]["10"]["goalcompletion"]["time"]["0"]} / #{'%.3f' % value["observations"]["10"]["goalcompletion"]["time"]["10"]} / #{'%.3f' % value["observations"]["10"]["goalcompletion"]["time"]["20"]} / #{'%.3f' % value["observations"]["10"]["goalcompletion"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["30"]["goalcompletion"]["time"]["0"]} / #{'%.3f' % value["observations"]["30"]["goalcompletion"]["time"]["10"]} / #{'%.3f' % value["observations"]["30"]["goalcompletion"]["time"]["20"]} / #{'%.3f' % value["observations"]["30"]["goalcompletion"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["50"]["goalcompletion"]["time"]["0"]} / #{'%.3f' % value["observations"]["50"]["goalcompletion"]["time"]["10"]} / #{'%.3f' % value["observations"]["50"]["goalcompletion"]["time"]["20"]} / #{'%.3f' % value["observations"]["50"]["goalcompletion"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["70"]["goalcompletion"]["time"]["0"]} / #{'%.3f' % value["observations"]["70"]["goalcompletion"]["time"]["10"]} / #{'%.3f' % value["observations"]["70"]["goalcompletion"]["time"]["20"]} / #{'%.3f' % value["observations"]["70"]["goalcompletion"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["100"]["goalcompletion"]["time"]["0"]} / #{'%.3f' % value["observations"]["100"]["goalcompletion"]["time"]["10"]} / #{'%.3f' % value["observations"]["100"]["goalcompletion"]["time"]["20"]} / #{'%.3f' % value["observations"]["100"]["goalcompletion"]["time"]["30"]}} & \\makecell{#{'%.1f' % value["observations"]["10"]["goalcompletion"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["10"]["goalcompletion"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["10"]["goalcompletion"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["10"]["goalcompletion"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["30"]["goalcompletion"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["30"]["goalcompletion"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["30"]["goalcompletion"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["30"]["goalcompletion"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["50"]["goalcompletion"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["50"]["goalcompletion"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["50"]["goalcompletion"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["50"]["goalcompletion"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["70"]["goalcompletion"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["70"]["goalcompletion"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["70"]["goalcompletion"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["70"]["goalcompletion"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["100"]["goalcompletion"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["100"]["goalcompletion"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["100"]["goalcompletion"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["100"]["goalcompletion"]["accuracy"]["30"]}} & \\makecell{#{'%.3f' % value["observations"]["10"]["uniqueness"]["time"]["0"]} / #{'%.3f' % value["observations"]["10"]["uniqueness"]["time"]["10"]} / #{'%.3f' % value["observations"]["10"]["uniqueness"]["time"]["20"]} / #{'%.3f' % value["observations"]["10"]["uniqueness"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["30"]["uniqueness"]["time"]["0"]} / #{'%.3f' % value["observations"]["30"]["uniqueness"]["time"]["10"]} / #{'%.3f' % value["observations"]["30"]["uniqueness"]["time"]["20"]} / #{'%.3f' % value["observations"]["30"]["uniqueness"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["50"]["uniqueness"]["time"]["0"]} / #{'%.3f' % value["observations"]["50"]["uniqueness"]["time"]["10"]} / #{'%.3f' % value["observations"]["50"]["uniqueness"]["time"]["20"]} / #{'%.3f' % value["observations"]["50"]["uniqueness"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["70"]["uniqueness"]["time"]["0"]} / #{'%.3f' % value["observations"]["70"]["uniqueness"]["time"]["10"]} / #{'%.3f' % value["observations"]["70"]["uniqueness"]["time"]["20"]} / #{'%.3f' % value["observations"]["70"]["uniqueness"]["time"]["30"]} \\\\ #{'%.3f' % value["observations"]["100"]["uniqueness"]["time"]["0"]} / #{'%.3f' % value["observations"]["100"]["uniqueness"]["time"]["10"]} / #{'%.3f' % value["observations"]["100"]["uniqueness"]["time"]["20"]} / #{'%.3f' % value["observations"]["100"]["uniqueness"]["time"]["30"]}} & \\makecell{#{'%.1f' % value["observations"]["10"]["uniqueness"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["10"]["uniqueness"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["10"]["uniqueness"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["10"]["uniqueness"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["30"]["uniqueness"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["30"]["uniqueness"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["30"]["uniqueness"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["30"]["uniqueness"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["50"]["uniqueness"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["50"]["uniqueness"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["50"]["uniqueness"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["50"]["uniqueness"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["70"]["uniqueness"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["70"]["uniqueness"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["70"]["uniqueness"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["70"]["uniqueness"]["accuracy"]["30"]} \\\\ #{'%.1f' % value["observations"]["100"]["uniqueness"]["accuracy"]["0"]} / #{'%.1f' % value["observations"]["100"]["uniqueness"]["accuracy"]["10"]} / #{'%.1f' % value["observations"]["100"]["uniqueness"]["accuracy"]["20"]} / #{'%.1f' % value["observations"]["100"]["uniqueness"]["accuracy"]["30"]}} \\Bstrut \\\\
    \\hline
    "
end

table += "\\end{tabular}}
\\caption{Resultados obtidos na reprodução dos experimentos}
\\label{table:resultados}
\\end{table}"

File.write(output_path, table)

